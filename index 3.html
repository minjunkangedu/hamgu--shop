
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í–„êµ¬ì‹ êµ ìƒì </title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fffaf0;
      color: #5c3a1e;
      padding: 40px;
      text-align: center;
    }
    h1 {
      font-size: 3em;
    }
    .item, .admin, .history, .leaderboard, .gift {
      border: 2px solid #deb887;
      border-radius: 12px;
      margin: 20px auto;
      padding: 20px;
      width: 60%;
      background-color: #fff6e6;
    }
    .item h2, .admin h2, .gift h2, .history h2, .leaderboard h2 {
      margin-bottom: 10px;
    }
    .price {
      font-weight: bold;
      color: #b85b12;
    }
    button {
      padding: 10px 20px;
      background-color: #b85b12;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:disabled {
      background-color: #ccc;
    }
    ul { text-align: left; }
  </style>
  <script>
    function loadBalance() {
      let username = prompt("ë‹¹ì‹ ì˜ ì´ë¦„(ì‹ë³„ìš©)ì„ ì…ë ¥í•˜ì„¸ìš”:");
      localStorage.setItem("hbc_user", username);
      if (!localStorage.getItem("hbc_" + username)) {
        localStorage.setItem("hbc_" + username, "1");
        localStorage.setItem("log_" + username, "[]");
      }
      updateDisplay();
      updateLeaderboard();
      showHistory();
    }

    function getUser() {
      return localStorage.getItem("hbc_user");
    }

    function getBalance(user) {
      return parseFloat(localStorage.getItem("hbc_" + user) || "0");
    }

    function setBalance(user, amount) {
      localStorage.setItem("hbc_" + user, amount.toFixed(1));
    }

    function updateDisplay() {
      document.getElementById("balance").innerText = getBalance(getUser());
    }

    function buyItem(item, cost) {
      let user = getUser();
      let balance = getBalance(user);
      if (balance >= cost) {
        setBalance(user, balance - cost);
        logPurchase(user, item, cost);
        alert(item + " êµ¬ë§¤ ì™„ë£Œ!");
        updateDisplay();
        showHistory();
        updateLeaderboard();
      } else {
        alert("HBCê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }
    }

    function logPurchase(user, item, cost) {
      let log = JSON.parse(localStorage.getItem("log_" + user) || "[]");
      log.push(item + " - " + cost + " HBC");
      localStorage.setItem("log_" + user, JSON.stringify(log));
    }

    function showHistory() {
      let user = getUser();
      let log = JSON.parse(localStorage.getItem("log_" + user) || "[]");
      let histElem = document.getElementById("history");
      histElem.innerHTML = "<h2>ğŸ“œ êµ¬ë§¤ ë‚´ì—­</h2>";
      if (log.length === 0) {
        histElem.innerHTML += "<p>êµ¬ë§¤ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
      } else {
        histElem.innerHTML += "<ul>" + log.map(item => "<li>" + item + "</li>").join("") + "</ul>";
      }
    }

    function adminGrantCoins() {
      const passcode = prompt("ì½¤í ê¶Œí•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
      if (passcode === "komq3244") {
        const user = prompt("ì§€ê¸‰í•  ëŒ€ìƒì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:");
        const amount = parseFloat(prompt("ì§€ê¸‰í•  HBC ì–‘ì„ ì…ë ¥í•˜ì„¸ìš”:"));
        const current = getBalance(user);
        setBalance(user, current + amount);
        alert(amount + " HBC ì§€ê¸‰ ì™„ë£Œ!");
        if (user === getUser()) updateDisplay();
        updateLeaderboard();
      } else {
        alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
      }
    }

    function giftCoins() {
      const to = prompt("ëˆ„êµ¬ì—ê²Œ ì„ ë¬¼í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
      const amount = parseFloat(prompt("ì–¼ë§ˆë¥¼ ì„ ë¬¼í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"));
      const from = getUser();
      const fromBal = getBalance(from);
      if (fromBal >= amount && amount > 0) {
        setBalance(from, fromBal - amount);
        setBalance(to, getBalance(to) + amount);
        alert(to + "ì—ê²Œ " + amount + " HBCë¥¼ ì„ ë¬¼í–ˆìŠµë‹ˆë‹¤!");
        updateDisplay();
        updateLeaderboard();
      } else {
        alert("ì”ì•¡ì´ ë¶€ì¡±í•˜ê±°ë‚˜ ê¸ˆì•¡ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    }

    function updateLeaderboard() {
      let table = "<h2>ğŸ† ì½”ì¸ ë³´ìœ  ìˆœìœ„</h2><ul>";
      const users = Object.keys(localStorage)
        .filter(k => k.startsWith("hbc_") && !k.includes("user"))
        .map(k => ({ user: k.slice(4), balance: parseFloat(localStorage[k]) }))
        .sort((a, b) => b.balance - a.balance)
        .slice(0, 5);
      users.forEach(u => table += `<li>${u.user}: ${u.balance} HBC</li>`);
      table += "</ul>";
      document.getElementById("leaderboard").innerHTML = table;
    }
  </script>
</head>
<body onload="loadBalance()">
  <h1>ğŸ¥“ í–„êµ¬ì‹ êµ ìƒì  ğŸ¥“</h1>
  <p><strong><span id="balance">0</span> HBC</strong> ë³´ìœ  ì¤‘</p>

  <div class="item">
    <h2>ğŸ í™©ê¸ˆì‚¬ê³¼</h2>
    <p>ì˜í˜¼ì„ ì¹˜ìœ í•˜ëŠ” ì‹ ì„±í•œ ê³¼ì¼</p>
    <p class="price">ê°€ê²©: 2 HBC</p>
    <button onclick="buyItem('í™©ê¸ˆì‚¬ê³¼', 2)">êµ¬ë§¤</button>
  </div>

  <div class="item">
    <h2>ğŸ¯ ëŸ­ì¼</h2>
    <p>í–‰ìš´ì˜ íš¨ê³¼ë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤ (10~30%)</p>
    <p class="price">ê°€ê²©: 4 HBC</p>
    <button onclick="buyItem('ëŸ­ì¼', 4)">êµ¬ë§¤</button>
  </div>

  <div class="item">
    <h2>âš—ï¸ ê²½í—˜ì¹˜ ë³‘</h2>
    <p>ë ˆë²¨ì—…ìš© ê²½í—˜ì¹˜ íšŒë³µ ë³‘</p>
    <p class="price">ê°€ê²©: 1 HBC</p>
    <button onclick="buyItem('ê²½í—˜ì¹˜ ë³‘', 1)">êµ¬ë§¤</button>
  </div>

  <div class="item">
    <h2>ğŸŸï¸ ì´ë²¤íŠ¸ í‹°ì¼“</h2>
    <p>í•œì • ì´ë²¤íŠ¸ ì°¸ì—¬ìš©</p>
    <p class="price">ê°€ê²©: 0.5 HBC</p>
    <button onclick="buyItem('ì´ë²¤íŠ¸ í‹°ì¼“', 0.5)">êµ¬ë§¤</button>
  </div>

  <div class="gift">
    <h2>ğŸ ì½”ì¸ ì„ ë¬¼</h2>
    <p>ë‹¤ë¥¸ ì‹ ìì—ê²Œ ì½”ì¸ì„ ì„ ë¬¼í•´ ë³´ì„¸ìš”</p>
    <button onclick="giftCoins()">ì½”ì¸ ì„ ë¬¼</button>
  </div>

  <div class="admin">
    <h2>ğŸ”‘ ì½¤íì˜ ê¶Œí•œ</h2>
    <p>ê´€ë¦¬ì ì „ìš©: HBC ì§€ê¸‰ ê¸°ëŠ¥</p>
    <button onclick="adminGrantCoins()">HBC ì§€ê¸‰</button>
  </div>

  <div id="leaderboard" class="leaderboard"></div>
  <div id="history" class="history"></div>
</body>
</html>
